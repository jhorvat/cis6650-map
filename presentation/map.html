<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <script src='https://api.mapbox.com/mapbox.js/v2.3.0/mapbox.js'></script>
        <link href='https://api.mapbox.com/mapbox.js/v2.3.0/mapbox.css' rel='stylesheet' />
        <style>
            body { margin:0; padding:0; }
            #map { position:absolute; top:0; bottom:0; width:100%; }
        </style>
    </head>
    <body>
        <style>
        .menu-ui {
          background:#fff;
          position:absolute;
          top:10px;right:10px;
          z-index:1;
          border-radius:3px;
          width:120px;
          border:1px solid rgba(0,0,0,0.4);
          }
          .menu-ui a {
            font-size:13px;
            color:#404040;
            display:block;
            margin:0;padding:0;
            padding:10px;
            text-decoration:none;
            border-bottom:1px solid rgba(0,0,0,0.25);
            text-align:center;
            }
            .menu-ui a:first-child {
              border-radius:3px 3px 0 0;
              }
            .menu-ui a:last-child {
              border:none;
              border-radius:0 0 3px 3px;
              }
            .menu-ui a:hover {
              background:#f8f8f8;
              color:#404040;
              }
            .menu-ui a.active {
              background:#3887BE;
              color:#FFF;
              }
              .menu-ui a.active:hover {
                background:#3074a4;
                }
        </style>

        <nav id='menu-ui' class='menu-ui'></nav>
        <div id='map'></div>

        <script src='js/data/wards.js'></script>
        <script src='js/data/food.js'></script>
        <script>
            L.mapbox.accessToken = 'pk.eyJ1IjoidGVhbW1pZGRsZXRhYmxlIiwiYSI6ImNpbDZ0cHRuMDA1eml1MGx2bjVvd2RpNm8ifQ.H7TauzsEVrD4fvr0ORQq8w';
            var map = L.mapbox.map('map', 'mapbox.light')
                        .setView([43.535139, -80.235302], 12);

            var layers = document.getElementById('menu-ui');

            var rentLayer = L.geoJson(wardRents, {
                style: function(feature ) {
                    return {
                        weight: 2,
                        opacity: 0.1,
                        color: 'black',
                        fillOpacity: 0.8,
                        fillColor: getColor(feature.properties.total_rentals)
                    };
                },
                onEachFeature: function(feature) {
                    //alert(feature.properties.total_rentals);
                }
            });

            addLayer(rentLayer, 'Rent Layer', 1)

            function addLayer(layer, name, zIndex) {
                layer
                    .setZIndex(zIndex)
                    .addTo(map);

                // Create a simple layer switcher that
                // toggles layers on and off.
                var link = document.createElement('a');
                    link.href = '#';
                    link.className = 'active';
                    link.innerHTML = name;

                link.onclick = function(e) {
                    e.preventDefault();
                    e.stopPropagation();

                    if (map.hasLayer(layer)) {
                        map.removeLayer(layer);
                        this.className = '';
                    } else {
                        map.addLayer(layer);
                        this.className = 'active';
                    }
                };

                layers.appendChild(link);
            }

            function getColor(d) {
                return d > 8296  ? '#a63603' :
                    d > 6639  ? '#e6550d' :
                    d > 4980  ? '#fd8d3c' :
                    d > 3319   ? '#fdae6b' :
                    d > 1659   ? '#fdd0a2' :
                    '#feedde';
            }
        </script>
    </body>
</html>
